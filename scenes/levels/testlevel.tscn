[gd_scene load_steps=19 format=3 uid="uid://bo4dcv0w78veg"]

[ext_resource type="PackedScene" uid="uid://b0eawcama2r08" path="res://source/class/level.tscn" id="1_i6ns8"]
[ext_resource type="Script" path="res://scenes/levels/testlevel.gd" id="1_tstgm"]
[ext_resource type="Material" uid="uid://3u37s52qfsun" path="res://assets/materials/maps/demolevel/demolevelUVfloorMat.tres" id="2_armk6"]
[ext_resource type="PackedScene" uid="uid://blxboep0qk3au" path="res://source/entity/player.tscn" id="3_256h8"]
[ext_resource type="PackedScene" uid="uid://bo6q7dydjheil" path="res://source/entity/area_detection.tscn" id="3_dw25u"]
[ext_resource type="PackedScene" uid="uid://dcftaala3gn8l" path="res://source/entity/cube.tscn" id="4_lurub"]
[ext_resource type="PackedScene" uid="uid://72l8h1dx78hv" path="res://source/entity/grenade_stash.tscn" id="6_rfgp7"]
[ext_resource type="PackedScene" uid="uid://ds0bnjacoj05w" path="res://source/entity/npc/npc_spawner.tscn" id="8_qteas"]
[ext_resource type="Texture2D" uid="uid://dm65ihwum8hym" path="res://assets/textures/entities/ui/markerblue.png" id="9_511m2"]
[ext_resource type="LightmapGIData" uid="uid://vai6v87o7oxf" path="res://scenes/levels/testlevel.lmbake" id="9_qnq7c"]

[sub_resource type="PhysicalSkyMaterial" id="PhysicalSkyMaterial_2jspe"]
energy_multiplier = 2.0

[sub_resource type="Sky" id="Sky_k1e3o"]
sky_material = SubResource("PhysicalSkyMaterial_2jspe")

[sub_resource type="Environment" id="Environment_pyumv"]
background_mode = 2
sky = SubResource("Sky_k1e3o")
tonemap_mode = 2
tonemap_exposure = 1.5
tonemap_white = 6.0
sdfgi_read_sky_light = false
sdfgi_min_cell_size = 0.0507813
sdfgi_cascade0_distance = 3.25
sdfgi_max_distance = 52.0
glow_enabled = true
glow_levels/1 = 1.0
glow_levels/2 = 1.0
glow_levels/4 = 1.0

[sub_resource type="NavigationMesh" id="NavigationMesh_i1m4y"]
vertices = PackedVector3Array(3, 1, 1.25, 3.25, 1, 2.25, 9.5, 1, 2.25, 9.5, 1, -9.5, -9.5, 1, 2.25, -3, 1, 2.25, -2.75, 1, 1.25, -9.5, 1, -9.5, -2.75, 1, 1.25, 3, 1, 1.25, 9.5, 1, -9.5, -9.5, 1, -9.5, -0.75, 1, 9.5, -0.75, 1, 3.5, -2.75, 1, 3.5, -2.75, 1, 3.5, -3, 1, 2.25, -9.5, 1, 2.25, -2.75, 1, 3.5, -9.5, 1, 2.25, -9.5, 1, 9.5, -0.75, 1, 9.5, 9.5, 1, 2.25, 3.25, 1, 2.25, 3, 1, 3.5, 3, 1, 3.5, -0.75, 1, 3.5, -0.75, 1, 9.5, 9.5, 1, 9.5, 9.5, 1, 2.25, 3, 1, 3.5, -0.75, 1, 9.5)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(5, 4, 6), PackedInt32Array(6, 4, 7), PackedInt32Array(9, 8, 10), PackedInt32Array(10, 8, 11), PackedInt32Array(14, 13, 12), PackedInt32Array(17, 16, 15), PackedInt32Array(19, 18, 20), PackedInt32Array(20, 18, 21), PackedInt32Array(22, 24, 23), PackedInt32Array(27, 26, 25), PackedInt32Array(29, 28, 30), PackedInt32Array(30, 28, 31)]
agent_height = 1.8
agent_radius = 0.3

[sub_resource type="BoxMesh" id="BoxMesh_8y3wm"]
lightmap_size_hint = Vector2i(204, 116)
material = ExtResource("2_armk6")
add_uv2 = true
size = Vector3(20, 1, 20)

[sub_resource type="BoxShape3D" id="BoxShape3D_cdo3o"]
size = Vector3(20, 1, 20)

[sub_resource type="BoxShape3D" id="BoxShape3D_f44pw"]
size = Vector3(5, 3, 1)

[sub_resource type="BoxMesh" id="BoxMesh_uene2"]
lightmap_size_hint = Vector2i(34, 61)
material = ExtResource("2_armk6")
add_uv2 = true
size = Vector3(5, 3, 1)

[node name="testlevel" instance=ExtResource("1_i6ns8")]
script = ExtResource("1_tstgm")

[node name="WorldEnvironment" parent="." index="0"]
environment = SubResource("Environment_pyumv")

[node name="DirectionalLight3D" parent="." index="1"]
transform = Transform3D(0.951836, -0.0810432, 0.295704, -0.0661402, 0.887456, 0.456122, -0.29939, -0.453711, 0.839352, 0, 0, 0)
light_energy = 1.0

[node name="NavigationRegion3D" parent="." index="4"]
navigation_mesh = SubResource("NavigationMesh_i1m4y")

[node name="floor" type="StaticBody3D" parent="NavigationRegion3D/geo" index="0"]

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavigationRegion3D/geo/floor" index="0"]
mesh = SubResource("BoxMesh_8y3wm")

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/geo/floor" index="1"]
shape = SubResource("BoxShape3D_cdo3o")

[node name="wall" type="StaticBody3D" parent="NavigationRegion3D/geo" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 2.43853)

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/geo/wall" index="0"]
shape = SubResource("BoxShape3D_f44pw")

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavigationRegion3D/geo/wall" index="1"]
mesh = SubResource("BoxMesh_uene2")
skeleton = NodePath("../CollisionShape3D")

[node name="simulated" type="Node3D" parent="." index="5"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.82119, 3.85752, 0)

[node name="cube" parent="simulated" index="0" instance=ExtResource("4_lurub")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1.0055)

[node name="cube2" parent="simulated" index="1" instance=ExtResource("4_lurub")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.13337, 0, 0)

[node name="cube3" parent="simulated" index="2" instance=ExtResource("4_lurub")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.04476, 0, 0)

[node name="cube4" parent="simulated" index="3" instance=ExtResource("4_lurub")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.757484)

[node name="cube5" parent="simulated" index="4" instance=ExtResource("4_lurub")]

[node name="entities" type="Node3D" parent="." index="6"]

[node name="player" parent="entities" index="0" instance=ExtResource("3_256h8")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.395, 1.12432, -6.2795)

[node name="AreaDetection" parent="entities" index="1" instance=ExtResource("3_dw25u")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.86413, 0.5144, -4.37708)

[node name="grenade_stash" parent="entities" index="2" instance=ExtResource("6_rfgp7")]
transform = Transform3D(0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, 0.707107, 4.22707, 0.5008, -4.74772)

[node name="npc_spawner" parent="entities" index="3" instance=ExtResource("8_qteas")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7.02567, 2.06063, 5.63751)
total_enemy_count = 3
interval_secs = 3
spawn_on_start = true

[node name="Sprite3D" type="Sprite3D" parent="entities" index="4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 0)
pixel_size = 0.001
billboard = 2
no_depth_test = true
texture = ExtResource("9_511m2")

[node name="LightmapGI" type="LightmapGI" parent="." index="7"]
quality = 2
bounces = 6
light_data = ExtResource("9_qnq7c")

[node name="screencapCam" type="Camera3D" parent="." index="8"]
transform = Transform3D(-0.958706, 0, 0.2844, 0, 1, 0, -0.2844, 0, -0.958706, 3.883, 1.891, -6.96)

[connection signal="body_entered" from="entities/AreaDetection" to="." method="_on_area_detection_body_entered"]
[connection signal="body_exited" from="entities/AreaDetection" to="." method="_on_area_detection_body_exited"]
