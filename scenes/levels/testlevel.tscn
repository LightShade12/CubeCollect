[gd_scene load_steps=16 format=3 uid="uid://bo4dcv0w78veg"]

[ext_resource type="PackedScene" uid="uid://b0eawcama2r08" path="res://source/class/level.tscn" id="1_i6ns8"]
[ext_resource type="Script" path="res://scenes/levels/testlevel.gd" id="1_tstgm"]
[ext_resource type="Material" uid="uid://3u37s52qfsun" path="res://scenes/levels/materials/demolevelUVfloorMat.tres" id="2_armk6"]
[ext_resource type="PackedScene" uid="uid://blxboep0qk3au" path="res://source/entity/player.tscn" id="3_256h8"]
[ext_resource type="PackedScene" uid="uid://dxqbjiwfybhtg" path="res://source/entity/npc_enemy.tscn" id="3_atuqp"]
[ext_resource type="PackedScene" uid="uid://bo6q7dydjheil" path="res://source/entity/area_detection.tscn" id="3_dw25u"]
[ext_resource type="PackedScene" uid="uid://dcftaala3gn8l" path="res://source/entity/cube.tscn" id="4_lurub"]
[ext_resource type="PackedScene" uid="uid://72l8h1dx78hv" path="res://source/entity/grenade_stash.tscn" id="6_rfgp7"]

[sub_resource type="PhysicalSkyMaterial" id="PhysicalSkyMaterial_2jspe"]
energy_multiplier = 2.0

[sub_resource type="Sky" id="Sky_k1e3o"]
sky_material = SubResource("PhysicalSkyMaterial_2jspe")

[sub_resource type="Environment" id="Environment_pyumv"]
background_mode = 2
sky = SubResource("Sky_k1e3o")
tonemap_mode = 2
sdfgi_enabled = true
sdfgi_use_occlusion = true
sdfgi_min_cell_size = 0.046875

[sub_resource type="BoxMesh" id="BoxMesh_8y3wm"]
lightmap_size_hint = Vector2i(204, 116)
material = ExtResource("2_armk6")
add_uv2 = true
size = Vector3(20, 1, 20)

[sub_resource type="BoxShape3D" id="BoxShape3D_cdo3o"]
size = Vector3(20, 1, 20)

[sub_resource type="BoxShape3D" id="BoxShape3D_f44pw"]
size = Vector3(5, 3, 1)

[sub_resource type="BoxMesh" id="BoxMesh_uene2"]
material = ExtResource("2_armk6")
size = Vector3(5, 3, 1)

[node name="testlevel" instance=ExtResource("1_i6ns8")]
script = ExtResource("1_tstgm")

[node name="WorldEnvironment" parent="." index="0"]
environment = SubResource("Environment_pyumv")

[node name="DirectionalLight3D" parent="." index="1"]
transform = Transform3D(0.951836, -0.0810432, 0.295704, -0.0661402, 0.887456, 0.456122, -0.29939, -0.453711, 0.839352, 0, 0, 0)
light_angular_distance = 0.5
shadow_enabled = true

[node name="floor" type="StaticBody3D" parent="NavigationRegion3D/geo" index="0"]

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavigationRegion3D/geo/floor" index="0"]
mesh = SubResource("BoxMesh_8y3wm")

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/geo/floor" index="1"]
shape = SubResource("BoxShape3D_cdo3o")

[node name="wall" type="StaticBody3D" parent="NavigationRegion3D/geo" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 2.43853)

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/geo/wall" index="0"]
shape = SubResource("BoxShape3D_f44pw")

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavigationRegion3D/geo/wall" index="1"]
mesh = SubResource("BoxMesh_uene2")
skeleton = NodePath("../CollisionShape3D")

[node name="simulated" type="Node3D" parent="." index="5"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.85752, 0)

[node name="cube" parent="simulated" index="0" instance=ExtResource("4_lurub")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1.0055)

[node name="cube2" parent="simulated" index="1" instance=ExtResource("4_lurub")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.13337, 0, 0)

[node name="cube3" parent="simulated" index="2" instance=ExtResource("4_lurub")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.04476, 0, 0)

[node name="cube4" parent="simulated" index="3" instance=ExtResource("4_lurub")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.757484)

[node name="cube5" parent="simulated" index="4" instance=ExtResource("4_lurub")]

[node name="entities" type="Node3D" parent="." index="6"]

[node name="player" parent="entities" index="0" instance=ExtResource("3_256h8")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.54754, 1.12432, 0)

[node name="npc_enemy" parent="entities" index="1" instance=ExtResource("3_atuqp")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.42045, 5.48521)

[node name="npc_enemy2" parent="entities" index="2" instance=ExtResource("3_atuqp")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.869558, 1.42045, 6.29971)

[node name="npc_enemy3" parent="entities" index="3" instance=ExtResource("3_atuqp")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.06497, 1.42045, 6.26994)

[node name="npc_enemy4" parent="entities" index="4" instance=ExtResource("3_atuqp")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.0117, 1.32419, 4.67755)

[node name="npc_enemy5" parent="entities" index="5" instance=ExtResource("3_atuqp")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.711083, 1.42045, 4.78027)

[node name="AreaDetection" parent="entities" index="6" instance=ExtResource("3_dw25u")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.86413, 0.5144, -4.37708)

[node name="grenade_stash" parent="entities" index="7" instance=ExtResource("6_rfgp7")]
transform = Transform3D(0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, 0.707107, 4.22707, 0.5008, -4.74772)

[connection signal="body_entered" from="entities/AreaDetection" to="." method="_on_area_detection_body_entered"]
[connection signal="body_exited" from="entities/AreaDetection" to="." method="_on_area_detection_body_exited"]
